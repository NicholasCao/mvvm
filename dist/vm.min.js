!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return _}));let n=0;function o(){this.id=n++,this.subs=[]}function s(e,t,i,n){Object.defineProperty(e,t,{value:i,enumerable:!!n,writable:!0,configurable:!0})}function r(e){return null!==e&&"object"==typeof e}function a(e,t){return(t=t.trim()).indexOf(".")>-1||t.indexOf("[")>-1?new Function("vm","return vm."+t)(e):e[t]}o.target=null,o.prototype={depend(){o.target&&o.target.addDep(this)},addSub(e){this.subs.push(e)},notify(){this.subs.forEach(e=>{e.update()})}};const c=Array.prototype,l=Object.create(c);function h(e){if(!e||"object"!=typeof e)return;let t;var i,n;return i=e,n="__ob__",t=hasOwnProperty.call(i,n)&&e.__ob__ instanceof d?e.__ob__:new d(e),t}function d(e){this.dep=new o,s(e,"__ob__",this),Array.isArray(e)?(s(e,"_oldLength",0),e.__proto__=l,this.observeArray(e)):this.walk(e)}function p(e,t,i){const n=new o;let s=h(i);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:()=>(o.target&&(n.depend(),s&&s.dep.depend()),i),set(e){i!==e&&("object"==typeof(i=e)&&(s=h(e)),n.notify())}})}["push","pop","shift","unshift","splice","sort","reverse"].forEach(e=>{const t=c[e];s(l,e,(function(...i){this._oldLength=this.length;const n=t.apply(this,i),o=this.__ob__;let s;switch(e){case"push":case"unshift":s=i;break;case"splice":s=i.slice(2)}return s&&o.observeArray(s),o.dep.notify(),n}))}),d.prototype={walk(e){for(const t in e)p(e,t,e[t])},observeArray(e){e.forEach(e=>{h(e)})}};const u=/{{((?:.|\n)+?)}}/g,m=/[{}]/g,f=/\(.*\)$/;var b={on:{priority:7,implement(e,t,i,n){if(-1===n.indexOf("("))t["on"+i]=e[n].bind(e);else if(f.test(n)){const[o,s]=n.split("("),r=s.slice(0,-1).split(",");t["on"+i]=function(t){const i=r.map(i=>{const n=a(e,i)?a(e,i):i.trim();return"$event"===i?t:n});e[o](...i)}}},update(e,t,i,n,o){}},bind:{priority:8,implement(e,t,i,n){const o=void 0===a(e,n)?n:a(e,n);t.setAttribute(i,o)},update(e,t,i,n,o){t.setAttribute(i,n),"style"===i&&(t._show?t.style.display=t.__originalDisplay:!1===t._show&&(t.style.display="none"))}},model:{priority:10,implement(e,t,i,n){t.value=a(e,n),t.oninput=function(){!function(e,t,i){(t=t.trim()).indexOf(".")>-1||t.indexOf("[")>-1?new Function(`vm.${t} = ${i}`)():e[t]=i}(e,n,t.value)}},update(e,t,i,n,o){t.value=n}},textNode:{priority:1,implement(e,t,i){t.nodeValue=t.nodeValue.replace(`{{${i}}}`,a(e,i))},update(e,t,i,n,o,s){n.nodeValue=s.replace(`{{${o}}}`,t);let r=n.nodeValue;if(u.test(r)){r.match(u).forEach(t=>{const i=t.replace(m,"");r=r.replace(t,a(e,i))}),n.nodeValue=r}}},for:{priority:20,implement(e,t,i){const n=/\((.*),(.*)\)/,o=i.match(/(.*) (?:in|of) (.*)/);let s,r;if(o){const e=o[1].match(n);e?(s=e[1].trim(),r=e[2].trim()):s=o[1].trim()}const c=o[2].trim(),l=document.createDocumentFragment(),h=document.createTextNode("");return function(e,t){const i=e.parentNode;i&&i.replaceChild(t,e)}(t,h),this.update(e,t,c,a(e,c),r,s,h,l),{exp:c,valueKey:s,indexKey:r,anchor:h,frag:l}},update(e,t,i,n,o,s,r,a){if(t._vmForNumber)for(let e=0;e<t._vmForNumber;e++)(c=r.previousElementSibling)&&c.parentNode.removeChild(c);var c;let l,h;if(t._vmForNumber=n.length,"object"==typeof n){for(const r in n){if(l=t.cloneNode(!0),h=l.innerHTML,s){const e=new RegExp(`{{\\s*${s}\\s*}}`,"g");h=h.replace(e,n[r]);const t=new RegExp(`(vm-bind:|vm-on:|:|@).*=.*\\W(${s})\\W`);let o=h.match(t);for(;o;){const e=o[0].replace(new RegExp(`(\\W)(${s})(\\W)`),`$1${i}[${r}]$3`);h=h.replace(o[0],e),o=h.match(t)}}if(o){const e=new RegExp(`{{\\s*${o}\\s*}}`,"g");h=h.replace(e,r);const t=new RegExp(`(vm-bind:|vm-on:|:|@).*=.*\\W(${o})\\W`);let i=h.match(t);for(;i;){const e=i[0].replace(new RegExp(`(\\W)(${o})(\\W)`),`$1${r}$3`);h=h.replace(i[0],e),i=h.match(t)}}l.innerHTML=h,l.removeAttribute("vm-for");const c=[...l.attributes];let d=!1,p=!1;c.forEach(e=>{const t=e.name.trim();let n=e.value.trim();if(/^(vm-bind:|vm-on:|:|@)/.test(t)&&(n=n.split(",").map(e=>e.trim()).join(","),s&&n.indexOf(s)>-1&&(n=n.replace(s,`${i}[${r}]`),d=!0),o&&n.indexOf(o)>-1&&(n=n.replace(o,r),d=!0),d)){try{l.setAttribute(t,n)}catch{p=!0,l.removeAttribute(t)}e.value=n}}),p&&(l._attributes=c),new v(e,l),a.appendChild(l)}var d,p;d=a,(p=r).parentNode.insertBefore(d,p)}else console.error(i+"必须为对象或数组")}},show:{priority:0,implement(e,t,i,n){t.__originalDisplay=t.style.display,a(e,n)?t._show=!0:(t.style.display="none",t._show=!1)},update(e,t,i,n,o){n?(t.style.display=t.__originalDisplay,t._show=!0):(t.style.display="none",t._show=!1)}}};function y(e,t,i){e._watchers.push(this),this.vm=e,this.depIds=new Set,this.cb=i,this.getter=function(e,t){return(t=t.trim()).indexOf(".")>-1||t.indexOf("[")>-1?new Function("vm","return vm."+t):()=>e[t]}(e,t),this.value=this.get()}function v(e,t){this.el=t,this.vm=e,this._textNodes=[],this.dirs=[],this.onRe=/^(vm-on:|@)/,this.bindRe=/^(vm-bind:|:)/,this.modelRe=/^vm-model/,this.forRe=/^vm-for/,this.showRe=/^vm-show/,this.braceRe1=/{{((?:.|\n)+?)}}/g,this.braceRe2=/[{}]/g,this.dirs=[],this.init()}function _(e){this._watchers=[],this._textNodes=[],this.$options=e,this.init()}y.prototype={get(){o.target=this;const e=this.getter.call(this.vm,this.vm);return o.target=null,e},update(){const e=this.get(),t=this.value;(e!==t||r(e))&&this.cb.call(this.vm,e,t),this.value=e},addDep(e){this.depIds.has(e.id)||(this.depIds.add(e.id),e.addSub(this))}},v.prototype={init(){this.el&&(this.compileNode(this.el)||this.el.hasChildNodes()&&this.compileNodeList(this.el.childNodes),this.render())},addDir(e,t,i,n){this.dirs.push({name:t,handle:e,expOrFn:i,node:n})},render(){const e=this.vm;this.dirs.sort((e,t)=>t.handle.priority-e.handle.priority),this.dirs.forEach(t=>{if("vm-for"!==t.name){const i=t.handle;i.implement&&i.implement(e,t.node,t.name,t.expOrFn);const n=(n,o)=>{i.update(e,t.node,t.name,n,o)};t.handle!==b.on&&void 0!==a(this.vm,t.expOrFn)&&new y(this.vm,t.expOrFn,n)}else{const i=t.handle,n=i.implement(e,t.node,t.expOrFn),o=(o,s)=>{i.update(e,t.node,n.exp,o,n.indexKey,n.valueKey,n.anchor,n.frag)};new y(this.vm,n.exp,o)}}),this._textNodes.forEach(t=>{const i=t.nodeValue.match(this.braceRe1),n=t.nodeValue;i&&i.forEach(i=>{const o=i.replace(this.braceRe2,"");b.textNode.implement(e,t,o);new y(e,o,(i,s)=>{b.textNode.update(e,i,s,t,o,n)})})})},compileNodeList(e){e.forEach(e=>{this.compileNode(e)||e.hasChildNodes()&&this.compileNodeList(e.childNodes)})},compileNode(e){const t=e.nodeType;return 1===t?this.compileElement(e):3===t?this.compileTextNode(e):void 0},compileElement(e){if(e.hasAttributes()||e._attributes){let t=!1;const i=e._attributes||[...e.attributes];return e.attributes["vm-for"]&&(t=!0),i.forEach(i=>{let n=i.name.trim();const o=i.value.trim();this.onRe.test(n)&&!t?(n=n.replace(this.onRe,""),this.addDir(b.on,n,o,e)):this.bindRe.test(n)&&!t?(e.removeAttribute(n.split("=")[0]),n=n.replace(this.bindRe,""),this.addDir(b.bind,n,o,e)):"vm-model"!==n||t?"vm-for"===n?this.addDir(b.for,n,o,e):this.showRe.test(n)&&!t&&(e.removeAttribute(n.split("=")[0]),this.addDir(b.show,n,o,e)):this.addDir(b.model,n,o,e)}),t}},compileTextNode(e){this._textNodes.push(e)}},_.prototype={init(){this.initData(),this.initMethods(),h(this._data),new v(this,this.$el),this.initWatch()},initData(){const e=this;e.$el=document.querySelector(e.$options.el);let t=e.$options.data;t=e._data="function"==typeof t?t():t||{};Object.keys(t).forEach(t=>{e.proxy(e,"_data",t)})},initMethods(){const e=this,t=e.$options.methods?e.$options.methods:{};Object.keys(t).forEach(i=>{e[i]=t[i]})},initWatch(){if(this.$options.watch){const e=this.$options.watch;for(const t in e)this.$watch(t,e[t])}},proxy(e,t,i){const n={enumerable:!0,configurable:!0,get:function(){return this[t][i]},set:function(e){this[t][i]=e}};Object.defineProperty(e,i,n)},$watch(e,t){const i=a(this,e);if(r(i)&&!Array.isArray(i))for(const n in i)this.$watch(`${e}.${n}`,t);else new y(this,e,t)},$set(e,t,i){this[e]&&(this[e][t]=i,this[e].__ob__.dep.notify())},$delete(e,t){this[e]&&(Array.isArray(this[e])?this[e].splice(t,1):(delete this[e][t],this[e].__ob__.dep.notify()))}},window.VM=_}]);